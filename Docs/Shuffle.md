# 随机打乱算法

## 需求：

在进入死局或者玩家使用打乱道具时，需要对整个元素矩阵打乱

## 算法

基础数据结构：列表

思路：先随机生成一个不重复的位置列表，每个元素随机选择一个位置并移动过去

### 步骤

1. 随机选出三个同一类型的元素，保证在位置变换后，一定有可以消除的地方
   
   ![1.jpg](https://github.com/PureZhao/TripleTown/raw/main/Docs/Shuffle%20Figs/1.jpg)

2. 将剩下的其他元素保存到另一个列表中

3. 随机选出三个点，这三个点对应了步骤1中三个元素的位置，保证一定有位置可以消除，防止打乱后出现死局，如图
   
   ![2.jpg](https://github.com/PureZhao/TripleTown/raw/main/Docs/Shuffle%20Figs/2.jpg)
- 基于中心点（红色）有四个方向可供选择

- 蓝色位置就为与中心点相邻，要判断相邻位置是否超出了矩阵范围
  
  - 如果超出范围，不考虑该方向
  
  - 如果没有超出，需要考虑该方向

- 四个方向分别都有三个绿色点位，需要判断三个绿色点位是否超出矩阵范围
  
  - 如果超出，不考虑该点
  
  - 如果未超出，考虑该点

- 根据方向生成点集，如{中心点、左、左1}、{中心点、左、左2}等
4. 在步骤3产生的点集里，随机选择一个点集作为步骤1三个元素的位置

5. 生成其他元素的位置

### 不足

1. 随机挑选三个保证能消除的元素时，没有考虑到场景中该元素数量不足3个的可能，虽然可能性很小
2. 挑选元素时是实时选择的，耗费时间，也增加了程序复杂度
3. 保证能够消除的选点时，没有考虑到其他样式
4. 点位是需要的时候再生成，耗费时间，也增加了程序复杂度
